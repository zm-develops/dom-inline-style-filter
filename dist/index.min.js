;(function() {
    'use strict';
    /*! dom-inline-style-filter 02-11-2025 */
    let contentElement=globalThis.document.body||globalThis.document.documentElement,cssBlockCommentRegex=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,removeDefaultStylesTimeoutId=null,tagNameDefaultStyles={},blockStoppers=new Set(["address","article","aside","blockquote","details","dialog","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","li","main","nav","ol","p","pre","section","svg","table","ul","math","ruby","svg","body","head","html"]),animationTimeKeys=["animation-duration","transition-duration"],boxModelOffsetKeys=["transform-origin","perspective-origin"],regressionPropertySet=new Set(["align-items","appearance","background-color","border","bottom","box-sizing","color","cursor","display","font-size","height","inset","interactivity","left","lettter-spacing","margin","max-height","max-width","min-height","min-width","opacity","overlay","outline","outline-offset","padding","perspective-origin","pointer-events","position","right","text-align","text-indent","text-spacing","text-underline","transform-origin","top","unicode-bidi","user-modify","user-select","vertical-align","visibility","white-space","width","word-spacing"]),dominlinestylefilter=function(e,t){(t=t||{}).debug=("boolean"==typeof t.debug?t:dominlinestylefilter.impl.options).debug,t.strict=("boolean"==typeof t.strict?t:dominlinestylefilter.impl.options).strict;e=new Context(e,t);return new Promise(stageCloneWith(e)).then(collectTree).then(sortAscending).then(multiPassFilter).then(unstageClone).catch(unstageClone.bind(null,e))};function Context(e,t){this.root=e,this.sibling=e.nextSibling,this.parent=e.parentElement,this.sandbox=null,this.self=null,this.tree=null,this.stack=[],this.pyramid=null,this.cutoff=null,this.depths=[],this.depth=null,this.declarations=null,this.bytes=null,this.delta=null,this.processed=[],this.options=t,this.options.debug=("boolean"==typeof t.debug?t:dominlinestylefilter.impl.options).debug,this.options.strict=("boolean"==typeof t.strict?t:dominlinestylefilter.impl.options).strict}function Styles(e,t){this.context=e,this.element=t,this.inline=t.style,this.computed=e.self.getComputedStyle(t)}function execute(e){let t;return e(e=>{t=e},e=>{throw new Error(e)}),t}"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=dominlinestylefilter:"function"==typeof define&&define.amd?define(()=>dominlinestylefilter):globalThis.dominlinestylefilter=dominlinestylefilter,dominlinestylefilter.sync=function(n,e){n=new Context(n,e=e||{});try{let t=execute(stageCloneWith(n));return[collectTree,sortAscending,multiPassFilter,unstageClone].forEach(function(e){t=e(t)}),t}catch(e){unstageClone(n,e)}},dominlinestylefilter.impl={},dominlinestylefilter.impl.options={},dominlinestylefilter.impl.options.debug=!1,dominlinestylefilter.impl.options.strict=!1;let hashes=new Set;function createSandbox(){var e=globalThis.document.createElementNS("http://www.w3.org/1999/xhtml","iframe");let t=getRandomFourDigit();for(;hashes.has(t);)t=getRandomFourDigit();e.id="dominlinestylefilter-sandbox-"+t,hashes.add(t),e.style.visibility="hidden",e.style.position="fixed",e.style.width="100vw",e.style.height="100vh";var n=globalThis.document.characterSet||"UTF-8",i=globalThis.document.doctype,i=i?(`<!DOCTYPE ${escapeHTML(i.name)} ${escapeHTML(i.publicId)} `+escapeHTML(i.systemId)).trim()+">":"";return contentElement.appendChild(e),tryTechniques(e,i,n,e.id)}function getRandomFourDigit(){return Math.floor(9e3*Math.random())+1e3}function escapeHTML(e){var t;return e?((t=globalThis.document.createElement("div")).innerText=e,t.innerHTML):""}function tryTechniques(e,t,n,i){try{return e.contentWindow.document.write(t+`<html><head><meta charset='${n}'><title>${i}</title></head><body></body></html>`),e}catch(e){}var o=globalThis.document.createElement("meta");o.setAttribute("charset",n);try{var l=globalThis.document.implementation.createHTMLDocument(i),r=(l.head.appendChild(o),t+l.documentElement.outerHTML);return e.setAttribute("srcdoc",r),e}catch(e){}return e.contentDocument.head.appendChild(o),e.contentDocument.title=i,e}function stageCloneWith(n){return(e,t)=>{n.sandbox=createSandbox(),n.self=n.sandbox.contentWindow,n.self.document.body.appendChild(n.root),n.sandbox.parentElement||t("failed to append sandbox iframe to DOM"),e(n)}}function collectTree(e){var t,n=e.self.document.createTreeWalker(e.root,globalThis.NodeFilter.SHOW_ELEMENT);e.cutoff=e.depth=1,e.tree=[e.root],e.depths=[e.depth],e.stack=[],e.pyramid=[],e.declarations=e.root.style.length,e.bytes=e.root.style.cssText.length,e.processed=[!1];let i=0;for(;t=n.nextNode();){i+=1,e.tree.push(t);var o=getDepth.call(e,t,i);e.depths.push(o),e.declarations+=t.style.length,e.bytes+=t.style.cssText.length,e.processed.push(!1)}return e}function sortAscending(n){for(let t=n.cutoff;0<t;t--)for(let e=0;e<n.tree.length;e++)n.depths[e]===t&&n.pyramid.push(n.tree[e]);return n.tree=null,n}function getDepth(t,e){var n=this,i=n.tree[e-1]||null;if(t.parentElement===i)n.depth+=1,n.stack.push(e-1),n.depth>n.cutoff&&(n.cutoff=n.depth);else if(t.previousElementSibling!==i)for(let e=n.stack.length;0<=e;e--){var o=n.stack[e];if(n.tree[o]===t.parentElement){n.depth=n.depths[o]+1,n.stack=n.stack.slice(0,e+1);break}}return n.depth}function multiPassFilter(e){let t,n=0;for(e.pyramid.forEach(stripBlockComments),e.root.querySelectorAll("style").forEach(filterActiveMediaQueries),e.options.debug&&(t=debugFilterAuthorInlineStyles(e)),6<=Math.round(Math.log2(e.declarations/e.pyramid.length))&&(e.delta=0,e.pyramid.forEach(filterAuthorInlineStyles.bind(null,e)),e.options.debug&&debugFilterAuthorInlineStyles(e,t),e.delta=null),e.options.debug&&(t=debugFilterActiveInlineStyles(e,null,n));0!==e.delta;)e.delta=0,e.pyramid.forEach(filterActiveInlineStyles.bind(null,e)),e.options.debug&&debugFilterActiveInlineStyles(e,null,n+=1);return e.options.debug&&debugFilterActiveInlineStyles(e,t),e}let roundTo3dp=e=>Math.round(1e3*e)/1e3;function debugFilterAuthorInlineStyles(e,t){if(!t)return console.info("filterAuthorInlineStyles"),console.info("context.pyramid.length",e.pyramid.length),console.info("context.declarations",e.declarations),console.info("context.bytes",e.bytes),performance.now();console.info("filterAuthorInlineStyles"),console.info("context.declarations",e.declarations),console.info("context.bytes",e.bytes),console.info("context.delta",e.delta),console.info("runtime(ms)",roundTo3dp(performance.now()-t))}function debugFilterActiveInlineStyles(e,t,n){if(0===n)return console.info("filterActiveInlineStyles"),console.info("context.declarations",e.declarations),console.info("context.bytes",e.bytes),performance.now();n?console.info("filterActiveInlineStyles","pass #"+n):(console.info("filterActiveInlineStyles"),console.info("runtime(ms)",roundTo3dp(performance.now()-t))),console.info("context.declarations",e.declarations),console.info("context.bytes",e.bytes),console.info("context.delta",e.delta)}function stripBlockComments(e){var t=e.getAttribute("style");cssBlockCommentRegex.test(t)&&e.setAttribute("style",t.replace(cssBlockCommentRegex,""))}function filterActiveMediaQueries(e){if(e.media&&!globalThis.matchMedia(e.media).matches)e.parentElement.removeChild(e);else if(e.textContent.includes("@media"))for(var t,n=/@media([^{]+)\{((?:(?!\}\s*\})[\s\S])*\})\s*\}/;t=n.exec(e.textContent);){var i=t[1].trim(),o=t[2].trim();globalThis.matchMedia(i).matches?e.textContent=e.textContent.replace(t[0],o):e.textContent=e.textContent.replace(t[0],"")}}function filterAuthorInlineStyles(e,t){var n,i,o,l,r;t.attributes.style&&(i=(n=new Styles(e,t)).inline.cssText.length,e.bytes-=i,e.delta+=i,i=cacheAuthorStyleRegressionGuard(n,t),o=freezeStyleAnimations(n),r=t!==e.root?e.self.getComputedStyle(t.parentElement):null,l=getDefaultStyle(e,t),tokenizeCssTextDeclarations(n.inline.cssText).map(getCssTextProperty).sort(compareHyphenCount).forEach(spliceAuthorCssStyleDeclaration.bind(null,n,r,l)),unfreezeStyleAnimations(n,o),applyAuthorStyleRegressionGuard(n,i),r=n.inline.cssText.length,e.bytes+=r,e.delta-=r,""===t.getAttribute("style"))&&t.removeAttribute("style")}function filterActiveInlineStyles(e,t,n){var i,o,l;t.attributes.style&&!0!==e.processed[n]&&(o=(i=new Styles(e,t)).inline.cssText.length,e.bytes-=o,e.delta+=o,l=freezeStyleAnimations(i),handleBoxModelOrigins(i),"none"===i.inline.display?(e.declarations-=i.inline.length,i.inline.cssText="display: none;",e.declarations+=1):tokenizeCssTextDeclarations(i.inline.cssText).map(getCssTextProperty).sort(compareHyphenCount).forEach(spliceActiveCssTextDeclaration.bind(null,i)),unfreezeStyleAnimations(i,l),l=i.inline.cssText.length,e.bytes+=l,e.delta-=l,l===o&&(e.processed[n]=!0),""===t.getAttribute("style"))&&t.removeAttribute("style")}function freezeStyleAnimations(e){let t=!1,n=null;for(var i of animationTimeKeys){var o=e.inline.getPropertyValue(i);o&&(["auto","0s"].includes(o)?e.inline.removeProperty(i):(t=!0,(n=n||{})[i]=o,e.inline.setProperty(i,"0s")))}return t?n:void 0}function unfreezeStyleAnimations(e,t){if(t)for(var n of animationTimeKeys)t[n]&&e.inline.setProperty(n,t[n])}function handleBoxModelOrigins(e){for(var t of boxModelOffsetKeys){var n=e.inline.getPropertyValue(t),i=e.computed.getPropertyValue(t);if(!n)return;e.inline.removeProperty(t);i=i.replace(/[0-9.]+/g,function(e){return Math.round(1e4*parseFloat(e))/1e4});e.computed.getPropertyValue(t)!==i&&e.inline.setProperty(t,n)}}function cacheAuthorStyleRegressionGuard(e){var t,n={};for(t of regressionPropertySet){var i=e.inline.getPropertyValue(t);i&&(n[t]=i)}return n}function applyAuthorStyleRegressionGuard(e,t){for(var n of regressionPropertySet)e.inline.setProperty(n,t[n])}function getDefaultStyle(e,t){var t=computeTagHierarchy(t),n=computeTagKey(t,e.options);return tagNameDefaultStyles[n]||(t=constructElementHierachy(e.self.document,t),e=computeStyleForDefaults(e.self,t),destroyElementHierarchy(t),tagNameDefaultStyles[n]=e)}let isArrayDelimiter=(e,t,n)=>0===t||t===n.length-1;function computeTagKey(e,t){return(!1===t.strict?e.filter(isArrayDelimiter).reverse().join(" "):e.reverse().join(">")).toLowerCase()}function computeTagHierarchy(t){var n=[t.tagName.toLowerCase()];if(!blockStoppers.has(t.tagName.toLowerCase())){let e=t;for(;e=e.parentNode;)if(e.nodeType===globalThis.Node.ELEMENT_NODE){var i=e.tagName.toLowerCase();if(n.push(i),blockStoppers.has(i))break}}return n}function constructElementHierachy(e,t){let n=e.body;for(;0<t.length;){var i=t.pop(),i=e.createElement(i);n.appendChild(i),n=i}return n.textContent="â€‹",n}function computeStyleForDefaults(e,t){let n={},i=e.getComputedStyle(t);return Array.from(i).forEach(function(e){n[e]="width"===e||"height"===e?"auto":i.getPropertyValue(e)}),n}function destroyElementHierarchy(e){let t=e;for(var n=e.parentElement;t&&"BODY"!==t.tagName;)null!==(n=t.parentElement)&&n.removeChild(t),t=n}function tokenizeCssTextDeclarations(t){var n=[];let i=!1,o=0;for(let e=0;e<t.length;e++){var l=t.charAt(e),l=('"'!==l&&"'"!==l||(i=!i),";"===l),r=e===t.length-1;i||!l&&!r||(r=t.substring(o,r&&!l?e+1:e).trim(),n.push(r),o=e+1)}return n}function getCssTextProperty(e){return e.slice(0,e.indexOf(":"))}function compareHyphenCount(e,t){var n=e=>/^--\b/.test(e),i=e=>/^-\b/.test(e);return n(e)&&!n(t)?1:!n(e)&&n(t)?-1:i(e)&&!i(t)?1:!i(e)&&i(t)?-1:t.split("-").length-e.split("-").length}function spliceAuthorCssStyleDeclaration(e,t,n,i){var o,l;"width"!==i&&"height"!==i&&"transform-origin"!==i&&"perspective-origin"!==i&&"animation-duration"!==i&&"transition-duration"!==i&&(o=e.inline.getPropertyValue(i),n=n[i],l=t?t.getPropertyValue(i):void 0,n)&&o===n&&(!l||t&&o===l)&&(e.inline.removeProperty(i),--e.context.declarations)}function spliceActiveCssTextDeclaration(e,t){if("width"!==t&&"height"!==t&&"transform-origin"!==t&&"perspective-origin"!==t&&"animation-duration"!==t&&"transition-duration"!==t){var i,o=e.inline.getPropertyValue(t),l=tokenizeCssTextDeclarations(e.inline.cssText);let n=l.findIndex(e=>t===getCssTextProperty(e));-1!==n&&(e.inline.cssText=l.filter((e,t)=>t!==n).join("; ")+";",i=""===o,o=o===e.computed.getPropertyValue(t),i||o?--e.context.declarations:e.inline.cssText=l.join("; ")+";")}}function unstageClone(e,t){if(e.parent&&e.parent.insertBefore(e.root,e.sibling),e.sandbox&&e.sandbox.parentElement&&contentElement.removeChild(e.sandbox),e.sandbox&&(e.self=null,e.sandbox=null),removeDefaultStylesTimeoutId&&clearTimeout(removeDefaultStylesTimeoutId),removeDefaultStylesTimeoutId=setTimeout(()=>{removeDefaultStylesTimeoutId=null,tagNameDefaultStyles={}},2e4),t&&t.stack)throw t;return e.root}
    //# sourceMappingURL=index.min.js.map
}());
